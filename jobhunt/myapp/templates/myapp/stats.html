{% extends 'myapp/base.html' %}

{% block title %}Application Statistics - Job Hunt{% endblock %}

{% block content %}
    <h1>Application Statistics</h1>

    <h2>By Application Type</h2>
    {% if types_stats %}
    <table>
        <thead>
            <tr>
                <th>Type</th>
                <th>Total Applications</th>
                <th>Answered</th>
                <th>Interviews</th>
                <th>Answer Rate (%)</th>
                <th>Interview Rate (%)</th>
            </tr>
        </thead>
        <tbody>
            {% for stat in types_stats %}
            <tr>
                <td>{{ stat.type }}</td>
                <td>{{ stat.total_applications }}</td>
                <td>{{ stat.answered }}</td>
                <td>{{ stat.interviews }}</td>
                <td>{{ stat.answer_rate|floatformat:2 }}</td>
                <td>{{ stat.interview_rate|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Nothing to show for now.</p>
    {% endif %}

    <h2>By Platform (Job Boards)</h2>
    {% if platforms_stats %}
    <table>
        <thead>
            <tr>
                <th>Platform</th>
                <th>Total Applications</th>
                <th>Answered</th>
                <th>Interviews</th>
                <th>Answer Rate (%)</th>
                <th>Interview Rate (%)</th>
            </tr>
        </thead>
        <tbody>
            {% for stat in platforms_stats %}
            <tr>
                <td>{{ stat.platform }}</td>
                <td>{{ stat.total_applications }}</td>
                <td>{{ stat.answered }}</td>
                <td>{{ stat.interviews }}</td>
                <td>{{ stat.answer_rate|floatformat:2 }}</td>
                <td>{{ stat.interview_rate|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Nothing to show for now.</p>
    {% endif %}
{% endblock %}
