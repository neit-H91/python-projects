{% extends 'base.html' %}
{% block title %}Appointment Detail{% endblock %}
{% block extra_styles %}
.appointment-card { background-color: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #ddd; }
.animal-info { background-color: white; padding: 15px; border-radius: 5px; margin-top: 10px; border: 1px solid #eee; }
.btn-back { background-color: #1976d2; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin-bottom: 20px; }
.btn-back:hover { background-color: #1565c0; }
.detail-row { margin-bottom: 10px; }
.label { font-weight: bold; color: #333; }
.value { color: #555; }
.status-past { color: #666; }
.status-today { color: #FF6B6B; font-weight: bold; }
.status-upcoming { color: #4CAF50; font-weight: bold; }
{% endblock %}
{% block content %}
    {% if error %}
        <h1>{{ error }}</h1>
    {% else %}
        <div style="margin-bottom: 20px;">
            <a href="{% url 'appointment_list' %}" class="btn-back">← Back to Appointments</a>
            <a href="{% url 'dashboard' %}" style="margin-left: 10px;" class="btn-back">← Back to Dashboard</a>
        </div>

        <div class="appointment-card">
            <h1>Appointment Details</h1>

            <div class="detail-row">
                <span class="label">Date & Time:</span>
                <span class="value">{{ appointment.date_time|date:"l, F j, Y \a\t g:i A" }}</span>
            </div>

            <div class="detail-row">
                <span class="label">Status:</span>
                <span class="value {% if appointment.date_time|date:'Y-m-d' < 'now'|date:'Y-m-d' %}status-past{% elif appointment.date_time|date:'Y-m-d' == 'now'|date:'Y-m-d' %}status-today{% else %}status-upcoming{% endif %}">
                    {% if appointment.date_time|date:'Y-m-d' < 'now'|date:'Y-m-d' %}
                        Completed
                    {% elif appointment.date_time|date:'Y-m-d' == 'now'|date:'Y-m-d' %}
                        Today
                    {% else %}
                        Upcoming
                    {% endif %}
                </span>
            </div>

            <div class="detail-row">
                <span class="label">Reason:</span>
                <span class="value">{{ appointment.reason }}</span>
            </div>

            {% if appointment.notes %}
            <div class="detail-row">
                <span class="label">Notes:</span>
                <span class="value">{{ appointment.notes }}</span>
            </div>
            {% endif %}
        </div>

        <div class="animal-info">
            <h2>Animal Information</h2>
            <div class="detail-row">
                <span class="label">Name:</span>
                <span class="value"><a href="{% url 'animal_detail' appointment.animal.pk %}">{{ appointment.animal.name }}</a></span>
            </div>
            <div class="detail-row">
                <span class="label">Species:</span>
                <span class="value">{{ appointment.animal.specie.name }}</span>
            </div>
            <div class="detail-row">
                <span class="label">Owner:</span>
                <span class="value">
                    {% if appointment.owner %}
                        <a href="{% url 'owner_detail' appointment.owner.pk %}">{{ appointment.owner.first_name }} {{ appointment.owner.last_name }}</a>
                        {% if appointment.owner.email %}(<a href="mailto:{{ appointment.owner.email }}">{{ appointment.owner.email }}</a>){% endif %}
                        {% if appointment.owner.phone %} • <a href="tel:{{ appointment.owner.phone }}">{{ appointment.owner.phone }}</a>{% endif %}
                    {% else %}
                        Stray Animal
                    {% endif %}
                </span>
            </div>
            {% if appointment.animal.birth_date %}
            <div class="detail-row">
                <span class="label">Birth Date:</span>
                <span class="value">{{ appointment.animal.birth_date|date:"M j, Y" }}</span>
            </div>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}
